<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>WebGIS KDE Heatmap Sampah</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #f3f4f6;
            color: #111827;
        }

        header {
            padding: 12px 16px;
            background: #111827;
            color: #f9fafb;
        }

        header h1 {
            font-size: 20px;
            margin-bottom: 4px;
        }

        header p {
            font-size: 13px;
            line-height: 1.4;
        }

        #controls {
            padding: 10px 16px;
            background: #e5e7eb;
            border-bottom: 1px solid #d1d5db;
        }

        #controls h2 {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .layer-toggle {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 8px;
        }

        .layer-toggle label {
            font-size: 13px;
        }

        .weights {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 8px;
        }

        .weights>div {
            min-width: 180px;
            font-size: 13px;
        }

        .weights input[type="range"] {
            width: 100%;
        }

        #btnUpdate {
            padding: 6px 14px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 13px;
            background: #2563eb;
            color: white;
            transition: background 0.15s ease;
        }

        #btnUpdate:hover {
            background: #1d4ed8;
        }

        main {
            flex: 1;
            display: flex;
        }

        #map {
            flex: 1;
            height: 100%;
        }

        footer {
            padding: 6px 16px;
            font-size: 11px;
            background: #111827;
            color: #9ca3af;
            text-align: right;
        }

        .leaflet-container {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <header>
        <h1>WebGIS KDE Heatmap Sampah</h1>
        <p>Heatmap berbasis Kernel Density Estimation (1–10 km spread) untuk analisis timbulan sampah.</p>
    </header>

    <section id="controls">
        <h2>Layer & Bobot</h2>

        <div class="layer-toggle">
            <label><input type="checkbox" id="chkWaste" checked> Timbulan sampah</label>
            <label><input type="checkbox" id="chkInfra" checked> Infrastruktur</label>
            <label><input type="checkbox" id="chkLandcover" checked> Tutupan lahan</label>
        </div>

        <div class="weights">
            <div>
                <label>Bobot sampah: <span id="wWasteVal">0.5</span></label>
                <input type="range" id="wWaste" min="0" max="1" step="0.1" value="0.5">
            </div>

            <div>
                <label>Bobot infrastruktur: <span id="wInfraVal">0.3</span></label>
                <input type="range" id="wInfra" min="0" max="1" step="0.1" value="0.3">
            </div>

            <div>
                <label>Bobot tutupan lahan: <span id="wLandcoverVal">0.2</span></label>
                <input type="range" id="wLandcover" min="0" max="1" step="0.1" value="0.2">
            </div>

            <div>
                <label>Radius KDE (km): <span id="kdeRadiusVal">3</span> km</label>
                <input type="range" id="kdeRadius" min="0.1" max="10" step="0.1" value="3">
            </div>


            <button id="btnUpdate">Update Heatmap</button>
        </div>
    </section>

    <main>
        <div id="map"></div>
    </main>

    <footer>&copy; 2025 – KDE Heatmap for Waste Density (Dummy data)</footer>


    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Leaflet Heatmap plugin -->
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

    <!-- Data files -->
    <script src="assets/data/waste_points.js"></script>
    <script src="assets/data/infra_points.js"></script>
    <script src="assets/data/landcover_points.js"></script>

    <!-- Main App Logic -->
    <script src="assets/js/app.js"></script>
</body>

</html>